<!DOCTYPE html>
<html>
<head>
  <title>Rileva Posizione</title>
</head>
<body>
  <h1>Rilevamento Posizione</h1>
  <p>Acquisisco la posizione...</p>

  <script>
    const serverURL = "https://script.google.com/macros/s/AKfycbwyrfOdo0K1q_fPFggwEED0Z_m-Dggh7NXKzPmH4Zb4SPoOjnAzyjKe1pu1_7mAfmeECQ/exec";
    const positionSite = "Posizione 1"; // Nome sito o posizione

    function sendDataToServer(lat, lon, site) {
      const url = `${serverURL}?lat=${lat}&lon=${lon}&site=${encodeURIComponent(site)}`;
      fetch(url)
        .then(response => response.text())
        .then(data => alert(data))
        .catch(error => alert("Errore: " + error));
    }

    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(
        position => {
          const lat = position.coords.latitude;
          const lon = position.coords.longitude;
          sendDataToServer(lat, lon, positionSite);
        },
        error => {
          alert("Impossibile ottenere la posizione.");
        }
      );
    } else {
      alert("Geolocalizzazione non supportata.");
    }
  </script>
</body>
</html>
